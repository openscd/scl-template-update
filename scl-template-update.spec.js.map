{"version":3,"file":"scl-template-update.spec.js","sourceRoot":"","sources":["../scl-template-update.spec.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable import/no-duplicates */\n/* eslint-disable no-unused-expressions */\nimport { fixture, expect, html } from '@open-wc/testing';\nimport { restore, SinonSpy, spy } from 'sinon';\n\nimport '@openenergytools/open-scd-core/open-scd.js';\nimport { OpenSCD } from '@openenergytools/open-scd-core/open-scd.js';\nimport { Insert, newOpenEvent, Remove } from '@openenergytools/open-scd-core';\n\nimport {\n  extension,\n  lln0Selection,\n  mmxuExceptSelection,\n  mmxuSelection,\n  nsdSpeced,\n} from './scl-template-update.testfiles.js';\nimport './scl-template-update.js';\nimport NsdTemplateUpdated from './scl-template-update.js';\n\nconst plugins = {\n  editor: [\n    {\n      name: 'Update Template',\n      translations: {\n        de: 'Update Template',\n      },\n      icon: 'edit',\n      active: true,\n      requireDoc: false,\n      src: '/dist/scl-template-update.js',\n    },\n  ],\n};\n\ndescribe('NsdTemplateUpdater', () => {\n  let openSCD: OpenSCD;\n  let element: NsdTemplateUpdated;\n  beforeEach(async () => {\n    openSCD = await fixture(\n      html`<open-scd plugins=\"${JSON.stringify(plugins)}\"></open-scd>`\n    );\n    await new Promise(res => {\n      setTimeout(res, 200);\n    });\n    element = openSCD.shadowRoot?.querySelector(\n      'oscd-p837a28e71799d7bc'\n    ) as NsdTemplateUpdated;\n  });\n\n  it('shows notification without loaded doc', () => {\n    expect(element.shadowRoot?.querySelector('h1')).to.exist;\n    expect(element.shadowRoot?.querySelector('tree-grid')).to.not.exist;\n    expect(element.shadowRoot?.querySelector('md-fab')).to.not.exist;\n  });\n\n  describe('given a nsd speced document', () => {\n    let listener: SinonSpy;\n    afterEach(restore);\n    beforeEach(async () => {\n      listener = spy();\n      openSCD.addEventListener('oscd-edit-v2', listener);\n      const doc = new DOMParser().parseFromString(nsdSpeced, 'application/xml');\n      openSCD.dispatchEvent(newOpenEvent(doc, 'SomeDoc'));\n      await new Promise(res => {\n        setTimeout(res, 200);\n      });\n    });\n\n    it('displays an action button', () =>\n      expect(element.shadowRoot?.querySelector('md-fab')).to.exist);\n\n    it('updates MMXU on action button click', async () => {\n      element.lNodeTypeUI!.value = `MMXU$oscd$_c53e78191fabefa3`;\n      element.onLNodeTypeSelect();\n      await element.updateComplete;\n\n      element.treeUI.selection = mmxuSelection;\n      await element.updateComplete;\n\n      (element.shadowRoot?.querySelector('md-fab') as HTMLElement).click();\n      await new Promise(res => {\n        setTimeout(res, 200);\n      });\n\n      const inserts = listener.args[0][0].detail.edit;\n      const removes = listener.args[1][0].detail.edit;\n      expect(inserts).to.have.lengthOf(5);\n      expect(removes).to.have.lengthOf(2);\n\n      expect(\n        ((inserts[0] as Insert).node as Element).getAttribute('id')\n      ).to.equal('MMXU$oscd$_b96484e663b92760');\n      expect(\n        ((inserts[1] as Insert).node as Element).getAttribute('id')\n      ).to.equal('Beh$oscd$_954939784529ca3d');\n      expect(\n        ((inserts[2] as Insert).node as Element).getAttribute('id')\n      ).to.equal('phsB$oscd$_65ee65af9248ae5d');\n      expect(\n        ((inserts[3] as Insert).node as Element).getAttribute('id')\n      ).to.equal('A$oscd$_ad714f2a7845e863');\n      expect(\n        ((inserts[4] as Insert).node as Element).getAttribute('id')\n      ).to.equal('stVal$oscd$_2ff6286b1710bcc1');\n\n      expect(\n        ((removes[0] as Remove).node as Element).getAttribute('id')\n      ).to.equal('MMXU$oscd$_c53e78191fabefa3');\n      expect(\n        ((removes[1] as Remove).node as Element).getAttribute('id')\n      ).to.equal('A$oscd$_41824603f63b26ac');\n    });\n\n    it('updates LLN0 on action button click', async () => {\n      element.lNodeTypeUI!.value = `LLN0$oscd$_85c7ffbe25d80e63`;\n      element.onLNodeTypeSelect();\n      await element.updateComplete;\n\n      element.treeUI.selection = lln0Selection; // change selection\n      await element.updateComplete;\n\n      (element.shadowRoot?.querySelector('md-fab') as HTMLElement).click();\n      await new Promise(res => {\n        setTimeout(res, 200);\n      });\n\n      const inserts = listener.args[0][0].detail.edit;\n      const removes = listener.args[1][0].detail.edit;\n\n      expect(inserts).to.have.lengthOf(9);\n      expect(removes).to.have.lengthOf(5);\n\n      expect(\n        ((inserts[0] as Insert).node as Element).getAttribute('id')\n      ).to.equal('LLN0$oscd$_70973585614987f4');\n      expect(\n        ((inserts[1] as Insert).node as Element).getAttribute('id')\n      ).to.equal('Mod$oscd$_ca3ec0d8276151d7');\n      expect(\n        ((inserts[2] as Insert).node as Element).getAttribute('id')\n      ).to.equal('origin$oscd$_8c586402c5f97d31');\n      expect(\n        ((inserts[3] as Insert).node as Element).getAttribute('id')\n      ).to.equal('SBOw$oscd$_59a179d1c87265eb');\n      expect(\n        ((inserts[4] as Insert).node as Element).getAttribute('id')\n      ).to.equal('origin$oscd$_a128160f5df91cfa');\n      expect(\n        ((inserts[5] as Insert).node as Element).getAttribute('id')\n      ).to.equal('Oper$oscd$_1c003786901c1473');\n      expect(\n        ((inserts[6] as Insert).node as Element).getAttribute('id')\n      ).to.equal('ctlModel$oscd$_40d881a91fe5c769');\n      expect(\n        ((inserts[7] as Insert).node as Element).getAttribute('id')\n      ).to.equal('orCat$oscd$_677850ccf85aee7a');\n      expect(\n        ((inserts[8] as Insert).node as Element).getAttribute('id')\n      ).to.equal('orCat$oscd$_8f842fc78e972b98');\n\n      expect(\n        ((removes[0] as Remove).node as Element).getAttribute('id')\n      ).to.equal('LLN0$oscd$_85c7ffbe25d80e63');\n      expect(\n        ((removes[1] as Remove).node as Element).getAttribute('id')\n      ).to.equal('Mod$oscd$_d63dba598ea9104c');\n      expect(\n        ((removes[2] as Remove).node as Element).getAttribute('id')\n      ).to.equal('Oper$oscd$_4974a5c5ec541314');\n      expect(\n        ((removes[3] as Remove).node as Element).getAttribute('id')\n      ).to.equal('SBOw$oscd$_4974a5c5ec541314');\n      expect(\n        ((removes[4] as Remove).node as Element).getAttribute('id')\n      ).to.equal('ctlModel$oscd$_f80264355419aeff');\n    });\n\n    it('does not update with same selection', async () => {\n      element.lNodeTypeUI!.value = `LLN0$oscd$_85c7ffbe25d80e63`;\n      element.onLNodeTypeSelect();\n      await element.updateComplete;\n\n      (element.shadowRoot?.querySelector('md-fab') as HTMLElement).click();\n      await new Promise(res => {\n        setTimeout(res, 200);\n      });\n\n      expect(listener).to.not.have.been.called;\n    });\n  });\n\n  describe('given a non nsd speced document', () => {\n    let listener: SinonSpy;\n    afterEach(restore);\n    beforeEach(async () => {\n      listener = spy();\n      openSCD.addEventListener('oscd-edit-v2', listener);\n      const doc = new DOMParser().parseFromString(extension, 'application/xml');\n      openSCD.dispatchEvent(newOpenEvent(doc, 'SomeDoc'));\n      await new Promise(res => {\n        setTimeout(res, 200);\n      });\n    });\n\n    it('does not load non NSD ln classes', async () => {\n      element.lNodeTypeUI!.value = `invalidLnClass`;\n      element.onLNodeTypeSelect();\n      await new Promise(res => {\n        setTimeout(res, 50);\n      });\n\n      expect(JSON.stringify(element.treeUI.tree)).to.equal('{}');\n      expect(element.warningDialog?.getAttribute('open')).to.not.be.null;\n    });\n\n    it('notifies with LNodeType is referenced', async () => {\n      element.lNodeTypeUI!.value = `LLN0$oscd$_85c7ffbe25d80e63`;\n      element.onLNodeTypeSelect();\n      await new Promise(res => {\n        setTimeout(res, 200);\n      });\n\n      expect(element.warningDialog?.getAttribute('open')).to.not.be.null;\n      expect(\n        element.warningDialog?.querySelector('form')?.textContent\n      ).to.include(\n        `The selected logical node type is referenced. This plugin should be used during specification only.`\n      );\n    });\n\n    it('updates MMXU on action button click', async () => {\n      element.lNodeTypeUI!.value = `MMXU$oscd$_c53e78191fabefa3`;\n      element.onLNodeTypeSelect();\n      await element.updateComplete;\n\n      element.treeUI.selection = mmxuExceptSelection;\n      await element.updateComplete;\n\n      (element.shadowRoot?.querySelector('md-fab') as HTMLElement).click();\n      await new Promise(res => {\n        setTimeout(res, 200);\n      });\n\n      (\n        element.choiceDialog?.querySelector('.button.proceed') as HTMLElement\n      ).click();\n      await new Promise(res => {\n        setTimeout(res, 200);\n      });\n\n      const inserts = listener.args[0][0].detail.edit;\n      const removes = listener.args[1][0].detail.edit;\n\n      expect(inserts).to.have.lengthOf(3);\n      expect(removes).to.have.lengthOf(1);\n\n      expect(\n        ((inserts[0] as Insert).node as Element).getAttribute('id')\n      ).to.equal('MMXU$oscd$_e244ae9c80495691');\n      expect(\n        ((inserts[1] as Insert).node as Element).getAttribute('id')\n      ).to.equal('Beh$oscd$_954939784529ca3d');\n      expect(\n        ((inserts[2] as Insert).node as Element).getAttribute('id')\n      ).to.equal('stVal$oscd$_2ff6286b1710bcc1');\n\n      expect(\n        ((removes[0] as Remove).node as Element).getAttribute('id')\n      ).to.equal('MMXU$oscd$_c53e78191fabefa3');\n    });\n  });\n});\n"]}